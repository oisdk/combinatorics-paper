\section{Countably Infinite Types} \label{infinite}
\begin{figure*}
  \centering

  \tikzcdset{
  cramped,
  every matrix/.append style={nodes={font=\scriptsize}},
  row    sep/normal=1em,
  column sep/normal=1em,
  }
  \begin{subfigure}[b]{.45\textwidth}
    \centering
    \begin{tikzcd}
      (1,e) \ar[rdddd, out=-45, in=135] & (2,e) \ar[rdddd, out=-45, in=135] & (3,e) \ar[rdddd, out=-45, in=135] & (4,e) \ar[rdddd, out=-45, in=135] & (5,e)        \\
      (1,d) \ar[u]     & (2,d) \ar[u]    & (3,d) \ar[u]    & (4,d) \ar[u]    & (5,d) \ar[u] \\
      (1,c) \ar[u]     & (2,c) \ar[u]    & (3,c) \ar[u]    & (4,c) \ar[u]    & (5,c) \ar[u] \\
      (1,b) \ar[u]     & (2,b) \ar[u]    & (3,b) \ar[u]    & (4,b) \ar[u]    & (5,b) \ar[u] \\
      (1,a) \ar[u]     & (2,a) \ar[u]    & (3,a) \ar[u]    & (4,a) \ar[u]    & (5,a) \ar[u]
    \end{tikzcd}
    \caption{Depth-First}
    \label{depth-first}
  \end{subfigure} \hfill
  \begin{subfigure}[b]{.45\textwidth}
    \centering
    \begin{tikzcd}
      (1,e) \ar[dr] & (2,e) \ar[dr]  & (3,e) \ar[dr]    & (4,e) \ar[dr] & (5,e) \\
      (1,d) \ar[dr] & (2,d) \ar[dr]  & (3,d) \ar[dr]    & (4,d) \ar[dr] & (5,d) \ar[u] \\
      (1,c) \ar[dr] & (2,c) \ar[dr]  & (3,c) \ar[dr]    & (4,c) \ar[dr] & (5,c) \ar[uul] \\
      (1,b) \ar[dr] & (2,b) \ar[dr]  & (3,b) \ar[dr]    & (4,b) \ar[dr] & (5,b) \ar[uuull, out=130, in=-50] \\
      (1,a) \ar[u]  & (2,a) \ar[uul, out=130, in=-50] & (3,a) \ar[uuull, out=130, in=-50] & (4,a) \ar[uuuulll, out=130, in=-50] & (5,a) \ar[uuuulll, out=130, in=-50]
    \end{tikzcd}
    \caption{Breadth-First}
    \label{breadth-first}
  \end{subfigure}
  \caption{Two possible products for the sets \(\left[ 1 \dots 5 \right]\) and
    \(\left[  a \dots e \right]\)}
  \label{pairings}
\end{figure*}
In the previous sections we saw different flavours of finiteness which were
really just different flavours of relations to \(\mathbf{Fin}\).
In this section we will see that we can construct a similar classification of
relations to \(\mathbb{N}\), in the form of the countably infinite types.
\subsection{Two Countable Types}
The two types for countability we will consider are analogous to split
enumerability and cardinal finiteness.
The change will be a simple one: we will swap out lists for streams.
\begin{definition}[Streams]
  \begin{equation}
    \mathbf{Stream}(A) \coloneqq (\mathbb{N} \rightarrow A)
    \simeq \llbracket \top , \text{const}(\mathbb{N}) \rrbracket
  \end{equation}
\end{definition}
\begin{definition}[Split Countability]
  \begin{equation}
    \aleph_0!(A) \coloneqq \Sigma {(\mathit{xs} : \mathbf{Stream}(A))} , \Pi {(x : A)} , x \in \mathit{xs}
  \end{equation}
\end{definition}
This type is definitionally equal to it surjection equivalent (\(\mathbb{N}
\twoheadrightarrow ! \; A\)).
We construct the unordered, propositional version of the predicate in much the
same way as we constructed cardinal finiteness.
\begin{definition}[Countability]
  \begin{equation}
    \aleph_0(A) \coloneqq \lVert \aleph_0!(A) \rVert
  \end{equation}
\end{definition}

From both of these types we can derive decidable equality.
\begin{lemma}
  Any countable type has decidable equality.
\end{lemma}
\subsection{Closure}
We know that countable infinity is not closed under the exponential (function
arrow), so the only closure we need to prove is \(\Sigma\) to cover all of
what's left.
\begin{theorem} \label{split-countability-sigma}
  Split countability is closed under \(\Sigma\).
\end{theorem}
We know that countable infinity is not closed under the exponential (function
arrow), so the only closure we need to prove is \(\Sigma\) to cover all of
what's left.
To do this we have to take a slightly different approach to the functions we
defined before.
Figure~\ref{pairings} illustrates the reason why: previously, we used the
depth-first product pairing for each support list.
This diverges if the first list is infinite, never exploring anything other than
the first element in the second list.
Instead, we use here the cantor pairing function, which performs a breadth-first
search of the pairings of both lists.

Finally, while we have lost certain closure proofs by allowing for infinite
types, we also \emph{gain} some: in particular the Kleene star.
\begin{theorem}
  Split countability is closed under Kleene star.
  \begin{equation}
    \aleph_0!(A) \rightarrow \aleph_0!(\mathbf{List}(A))
  \end{equation}
\end{theorem}
Again, this proof requires a particular pattern to ensure productivity.
The pattern here builds an intermediate stream \(\mathcal{KV}\) of non-empty
lists from the input support stream \(\mathit{xs}\), which is subsequently
flattened.
\begin{equation}
  \mathcal{KV}_i \coloneqq \left[ \left[ \mathit{xs}_{j - 1} \mid j \in \mathit{js} \right] \mid \mathit{js} \in \mathbf{List}(\mathbb{N}) ; \text{sum}(\mathit{js}) = i ; 0 \notin \mathit{js}  \right]
\end{equation}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../paper"
%%% End: